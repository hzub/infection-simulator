(this["webpackJsonpinfection-simulator"]=this["webpackJsonpinfection-simulator"]||[]).push([[0],{118:function(e,t,a){e.exports=a(207)},206:function(e,t,a){},207:function(e,t,a){"use strict";a.r(t);var n,i=a(0),c=a.n(i),r=a(6),l=a(81),o=a(21),s=function(e,t,a){var n=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));return n>=a?null:[(t.y-e.y)/n,-(t.x-e.x)/n]};!function(e){e[e.healthy=0]="healthy",e[e.infected=1]="infected",e[e.cured=2]="cured"}(n||(n={}));var u=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e},d=function(e,t){var a,i=0,c=0,r=0,l=0,o=0,d=!1,h=!1,m=[],f=0,p=e.dotSize/2,g=document.getElementById("canvas"),v=g.getContext("2d");if(g.width=e.canvasWidth,g.height=e.canvasHeight+e.chartHeight,g.style.width="".concat(e.canvasWidth/2,"px"),g.style.height="".concat((e.canvasHeight+e.chartHeight)/2,"px"),!v)throw new Error("No context!");var y=[];y=function(e,t){for(var a=[],i=function(t){var i,c=0,r=0;do{c=e.dotSize/2+Math.random()*e.canvasWidth-e.dotSize,r=e.dotSize/2+Math.random()*e.canvasHeight-e.dotSize}while(a.some((function(t){return a=t,n={x:c,y:r},i=e.dotSize,Math.sqrt(Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2))<=i+4;var a,n,i})));a.push({x:c,y:r,state:n.healthy,stationary:!1,speedVec:(i=2*Math.random()*Math.PI,[Math.cos(i),Math.sin(i)])})},c=0;c<t.numberOfDots;c++)i();for(var r=u(a),l=0;l<t.stationaryPercentAtStart/100*r.length;l++)r[l].stationary=!0,r[l].speedVec=[0,0];for(var o=u(r).sort((function(e,t){return e.stationary&&!t.stationary?1:e.stationary&&t.stationary?0:-1})),s=0;s<t.infectedDotsAtStart;s++)o[s].state=n.infected;return o}(e,t);var E=function u(h){if(v.clearRect(0,0,e.canvasWidth,e.canvasHeight+e.chartHeight),v.fillStyle="rgba(0,0,0,0.025)",v.fillRect(0,e.canvasHeight,e.canvasWidth,e.chartHeight),!d){v.save();for(var g=0;g<y.length;g++){var E=y[g];v.fillStyle=E.state===n.infected?"orangered":E.state===n.cured?"limegreen":"#bbb",v.beginPath(),v.arc(E.x,E.y,p+1,0,2*Math.PI),v.fill()}v.font="20px Source Sans Pro",v.fillStyle="rgba(0,0,0,0.2)",v.fillRect(0,e.canvasHeight,e.canvasWidth,1),v.fillStyle="rgba(0,0,0,0.15)",v.fillRect(0,e.canvasHeight+e.chartHeight/2,e.canvasWidth,1),v.fillText(Math.round(y.length/2).toFixed(0),8,e.canvasHeight+e.chartHeight/2-8),v.fillRect(0,e.canvasHeight+e.chartHeight/4,e.canvasWidth,1),v.fillText(Math.round(.75*y.length).toFixed(0),8,e.canvasHeight+e.chartHeight/4-8),v.fillRect(0,e.canvasHeight+.75*e.chartHeight,e.canvasWidth,1),v.fillText(Math.round(.25*y.length).toFixed(0),8,e.canvasHeight+.75*e.chartHeight-8),v.fillStyle="rgba(0,0,0,0.4)",v.fillRect(0,e.canvasHeight+(100-t.medicalCapacityPercent)/100*e.chartHeight,e.canvasWidth,1),v.fillText("Supposed medical capacity",64,e.canvasHeight+(100-t.medicalCapacityPercent)/100*e.chartHeight-8);for(var b=0;b<Math.min(m.length,e.canvasWidth/e.chartBarWidth);b++){var x=e.canvasWidth-(b+1)*e.chartBarWidth,H=m[b][0]/y.length*e.chartHeight,S=m[b][1]/y.length*e.chartHeight;v.fillStyle="rgba(255,0,0,0.3)",v.fillRect(x,e.canvasHeight+e.chartHeight-H,e.chartBarWidth,H),v.fillStyle="rgba(100,255,100,0.3)",v.fillRect(x,e.canvasHeight+e.chartHeight-S,e.chartBarWidth,S)}v.restore(),function(a){for(var i=0;i<y.length;i++){var c=y[i];if(c.state!==n.infected||c.infectionTime||(c.infectionTime=a),c.infectionTime&&a-c.infectionTime>1e3*t.timeToCure&&(c.infectionTime=void 0,c.state=n.cured),!c.stationary){c.x=c.x+c.speedVec[0]*e.dotVelocity,c.y=c.y+c.speedVec[1]*e.dotVelocity,y[i].x<p&&(y[i].x=p,y[i].speedVec[0]=-y[i].speedVec[0]),y[i].x>e.canvasWidth-p&&(y[i].x=e.canvasWidth-p,y[i].speedVec[0]=-y[i].speedVec[0]),y[i].y<p&&(y[i].y=p,y[i].speedVec[1]=-y[i].speedVec[1]),y[i].y>e.canvasHeight-p&&(y[i].y=e.canvasHeight-p,y[i].speedVec[1]=-y[i].speedVec[1]);for(var r=0;r<y.length;r++){var l=y[r];if(i!==r){var o=s(y[i],y[r],e.dotSize);if(null!==o){c.state===n.infected&&l.state===n.healthy&&(l.state=n.infected),l.state===n.infected&&c.state===n.healthy&&(c.state=n.infected),c.stationary||(c.x=c.x-c.speedVec[0]*e.dotVelocity,c.y=c.y-c.speedVec[1]*e.dotVelocity);var u=c.speedVec,d=l.speedVec,h=[u[0]-d[0],u[1]-d[1]],m=(b=h)[0]*(x=o)[0]+b[1]*x[1],f=[o[0]*m,o[1]*m],g=[h[0]-f[0],h[1]-f[1]];if(!c.stationary){c.speedVec[0]=c.speedVec[0]-(l.stationary?2:1)*g[0],c.speedVec[1]=c.speedVec[1]-(l.stationary?2:1)*g[1];var v=Math.sqrt(Math.pow(c.speedVec[0],2)+Math.pow(c.speedVec[1],2));c.speedVec[0]/=v,c.speedVec[1]/=v}if(!l.stationary){l.speedVec[0]=l.speedVec[0]+(c.stationary?2:1)*g[0],l.speedVec[1]=l.speedVec[1]+(c.stationary?2:1)*g[1];var E=Math.sqrt(Math.pow(l.speedVec[0],2)+Math.pow(l.speedVec[1],2));l.speedVec[0]/=E,l.speedVec[1]/=E}}}}}}var b,x}(h),r=y.filter((function(e){return e.state===n.healthy})).length,l=y.filter((function(e){return e.state===n.infected})).length,o=y.filter((function(e){return e.state===n.cured})).length,h-f>50&&(f=h,m.unshift([l,o])),l>i&&(i=l),c=100*i/y.length,a&&a(),window.requestAnimationFrame(u)}};return{start:function(){h||(h=!0,window.requestAnimationFrame(E))},stop:function(){d=!0},onUpdate:function(e){a=e},getState:function(){return{numHealthy:r,numInfected:l,numCured:o,peakInfected:i,peakInfectedPercent:c}}}},h=a(82),m=a(211),f=a(216),p=a(217),g=a(212),v=a(214),y=a(50),E=a(210),b=a(215),x=a(213),H=m.a.Title,S=m.a.Paragraph,V=function(e){var t=e.simulationConfig,a=e.setSimulationConfig,n=e.field,i=e.max,r=e.min,l=e.suffix;return c.a.createElement(f.a,{gutter:16},c.a.createElement(p.a,{span:16},c.a.createElement(g.a,{value:t[n],min:r,max:i,tipFormatter:function(e){return"".concat(e).concat(l||"")},style:{width:"100%"},onChange:function(e){a(Object(h.a)(t,(function(t){t[n]=e||1})))}})),c.a.createElement(p.a,{span:8},c.a.createElement(v.a,{value:t[n],min:r,max:i,style:{width:"100%"},formatter:function(e){return"".concat(e).concat(l||"")},onChange:function(e){a(Object(h.a)(t,(function(t){t[n]=e||1})))}})))};var w=function(){var e=Object(i.useState)(),t=Object(o.a)(e,2),a=t[0],n=t[1],r=Object(i.useState)(),s=Object(o.a)(r,2),u=s[0],h=s[1],m=Object(i.useState)({dotSize:8,dotVelocity:1.4,canvasWidth:1200,canvasHeight:800,chartHeight:300,chartBarWidth:.5}),g=Object(o.a)(m,1)[0],v=Object(i.useState)(),w=Object(o.a)(v,2),C=w[0],M=w[1],j=Object(i.useState)({stationaryPercentAtStart:60,infectedDotsAtStart:10,timeToCure:14,numberOfDots:100,medicalCapacityPercent:25}),W=Object(o.a)(j,2),O=W[0],T=W[1],P=c.a.useCallback((function(){a&&a.stop();var e=d(Object(l.a)({},g),Object(l.a)({},O));M(O),n(e),e.start()}),[a,O,g]),I=c.a.useCallback((function(){if(a){var e=a.getState();h(e)}}),[a]);Object(i.useEffect)((function(){var e=setInterval((function(){I()}),1e3);return function(){return clearInterval(e)}}),[I]),Object(i.useEffect)((function(){}),[a]);var k=c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("div",null,"Population count"," ",c.a.createElement(y.a,{overlay:"Set how many people will live in your population."},c.a.createElement(x.a,null))),c.a.createElement(V,{min:10,max:500,field:"numberOfDots",simulationConfig:O,setSimulationConfig:T})),c.a.createElement(E.a,null),c.a.createElement("div",null,c.a.createElement("div",null,"Percent of stationary (isolating) people"," ",c.a.createElement(y.a,{overlay:'This percentage of people will not move in your population. They can be "visited" by other persons, but will remain stationary.'},c.a.createElement(x.a,null))),c.a.createElement(V,{min:0,max:100,field:"stationaryPercentAtStart",simulationConfig:O,setSimulationConfig:T,suffix:"%"})),c.a.createElement(E.a,null),c.a.createElement("div",null,c.a.createElement("div",null,"Time to cure in seconds"," ",c.a.createElement(y.a,{overlay:'After set amount of time, every infected person will become "cured" - this means that it will not transmit the infection and cannot be infected anymore.'},c.a.createElement(x.a,null))),c.a.createElement(V,{min:1,max:30,field:"timeToCure",simulationConfig:O,setSimulationConfig:T,suffix:" s"})),c.a.createElement(E.a,null),c.a.createElement("div",null,c.a.createElement("div",null,"Initially infected population"," ",c.a.createElement(y.a,{overlay:"This number of people will have be infected from the beginning."},c.a.createElement(x.a,null))),c.a.createElement(V,{min:1,max:O.numberOfDots,field:"infectedDotsAtStart",simulationConfig:O,setSimulationConfig:T,suffix:" / ".concat(O.numberOfDots)})));return c.a.createElement("div",null,c.a.createElement(f.a,{justify:"center",align:"middle"},c.a.createElement(p.a,{span:20},c.a.createElement(f.a,{justify:"center"},c.a.createElement(p.a,{span:16},c.a.createElement(f.a,{justify:"center"},c.a.createElement(H,null,"Social Distancing Simulator"),c.a.createElement(S,{type:"secondary"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.")))),c.a.createElement(f.a,{justify:"center",gutter:24,align:"middle",style:{height:60}},u&&c.a.createElement(c.a.Fragment,null,c.a.createElement(p.a,{className:"indicator i-healthy"},"Healthy: ",u.numHealthy),c.a.createElement(p.a,{className:"indicator i-infected"},"Infected: ",u.numInfected),c.a.createElement(p.a,{className:"indicator i-cured"},"Cured: ",null===u||void 0===u?void 0:u.numCured))),c.a.createElement(f.a,{justify:"center",gutter:16,align:"middle",style:{height:60}},u&&c.a.createElement(c.a.Fragment,null,c.a.createElement(p.a,{className:"small-indicator i-peak-infected"},"Peak infected: ",u.peakInfected," (",null===u||void 0===u?void 0:u.peakInfectedPercent.toFixed(2)," %)"))))),c.a.createElement(f.a,{justify:"center"},c.a.createElement(p.a,{span:20},c.a.createElement(f.a,{gutter:16},c.a.createElement(p.a,{className:"wrap-controls"},k),c.a.createElement(p.a,{className:"wrap-canvas",style:{minWidth:600}},c.a.createElement(f.a,{justify:"center"},c.a.createElement(b.a,{type:"primary",danger:C!==O,style:{width:g.canvasWidth/2},onClick:P},a?C===O?"Restart simulation":"Apply new settings and restart simulation":"Start simulation")),c.a.createElement(f.a,{justify:"center"},c.a.createElement("canvas",{id:"canvas",style:{width:g.canvasWidth/2,height:(g.canvasHeight+g.chartHeight)/2}})))))))};a(205),a(206);r.render(i.createElement(w,null),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.0ae04c81.chunk.js.map