(this["webpackJsonpinfection-simulator"]=this["webpackJsonpinfection-simulator"]||[]).push([[0],{118:function(e,t,a){e.exports=a(207)},206:function(e,t,a){},207:function(e,t,a){"use strict";a.r(t);var n,i=a(0),c=a.n(i),r=a(6),l=a(81),o=a(21),s=function(e,t,a){var n=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));return n>=a?null:[(t.y-e.y)/n,-(t.x-e.x)/n]};!function(e){e[e.healthy=0]="healthy",e[e.infected=1]="infected",e[e.cured=2]="cured"}(n||(n={}));var d=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e},h=function(e,t){var a,i=0,c=0,r=0,l=0,o=0,h=!1,u=!1,f=[],m=0,g=e.dotSize/2,p=document.getElementById("canvas"),y=p.getContext("2d");if(p.width=e.canvasWidth,p.height=e.canvasHeight+e.chartHeight,p.style.width="".concat(e.canvasWidth/2,"px"),p.style.height="".concat((e.canvasHeight+e.chartHeight)/2,"px"),!y)throw new Error("No context!");var v=[];v=function(e,t){for(var a=[],i=function(t){var i,c=0,r=0;do{c=e.dotSize/2+Math.random()*e.canvasWidth-e.dotSize,r=e.dotSize/2+Math.random()*e.canvasHeight-e.dotSize}while(a.some((function(t){return a=t,n={x:c,y:r},i=e.dotSize,Math.sqrt(Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2))<=i+4;var a,n,i})));a.push({x:c,y:r,state:n.healthy,stationary:!1,speedVec:(i=2*Math.random()*Math.PI,[Math.cos(i),Math.sin(i)])})},c=0;c<t.numberOfDots;c++)i();for(var r=d(a),l=0;l<t.stationaryPercentAtStart/100*r.length;l++)r[l].stationary=!0,r[l].speedVec=[0,0];for(var o=d(r).sort((function(e,t){return e.stationary&&!t.stationary?1:e.stationary&&t.stationary?0:-1})),s=0;s<t.infectedDotsAtStart;s++)o[s].state=n.infected;return o}(e,t);var E=function d(u){if(y.clearRect(0,0,e.canvasWidth,e.canvasHeight+e.chartHeight),y.fillStyle="rgba(0,0,0,0.025)",y.fillRect(0,e.canvasHeight,e.canvasWidth,e.chartHeight),!h){y.save();for(var p=0;p<v.length;p++){var E=v[p];y.fillStyle=E.state===n.infected?"orangered":E.state===n.cured?"limegreen":"#bbb",y.beginPath(),y.arc(E.x,E.y,g+1,0,2*Math.PI),y.fill()}y.font="20px Source Sans Pro",y.fillStyle="rgba(0,0,0,0.2)",y.fillRect(0,e.canvasHeight,e.canvasWidth,1),y.fillStyle="rgba(0,0,0,0.15)",y.fillRect(0,e.canvasHeight+e.chartHeight/2,e.canvasWidth,1),y.fillText(Math.round(v.length/2).toFixed(0),8,e.canvasHeight+e.chartHeight/2-8),y.fillRect(0,e.canvasHeight+e.chartHeight/4,e.canvasWidth,1),y.fillText(Math.round(.75*v.length).toFixed(0),8,e.canvasHeight+e.chartHeight/4-8),y.fillRect(0,e.canvasHeight+.75*e.chartHeight,e.canvasWidth,1),y.fillText(Math.round(.25*v.length).toFixed(0),8,e.canvasHeight+.75*e.chartHeight-8),y.fillStyle="rgba(0,0,0,0.4)",y.fillRect(0,e.canvasHeight+(100-t.medicalCapacityPercent)/100*e.chartHeight,e.canvasWidth,1),y.fillText("Supposed medical capacity",64,e.canvasHeight+(100-t.medicalCapacityPercent)/100*e.chartHeight-8);for(var b=0;b<Math.min(f.length,e.canvasWidth/e.chartBarWidth);b++){var x=e.canvasWidth-(b+1)*e.chartBarWidth,H=f[b][0]/v.length*e.chartHeight,S=f[b][1]/v.length*e.chartHeight;y.fillStyle="rgba(255,0,0,0.3)",y.fillRect(x,e.canvasHeight+e.chartHeight-H,e.chartBarWidth,H),y.fillStyle="rgba(100,255,100,0.3)",y.fillRect(x,e.canvasHeight+e.chartHeight-S,e.chartBarWidth,S)}y.restore(),function(a){for(var i=0;i<v.length;i++){var c=v[i];if(c.state!==n.infected||c.infectionTime||(c.infectionTime=a),c.infectionTime&&a-c.infectionTime>1e3*t.timeToCure&&(c.infectionTime=void 0,c.state=n.cured),!c.stationary){c.x=c.x+c.speedVec[0]*e.dotVelocity,c.y=c.y+c.speedVec[1]*e.dotVelocity,v[i].x<g&&(v[i].x=g,v[i].speedVec[0]=-v[i].speedVec[0]),v[i].x>e.canvasWidth-g&&(v[i].x=e.canvasWidth-g,v[i].speedVec[0]=-v[i].speedVec[0]),v[i].y<g&&(v[i].y=g,v[i].speedVec[1]=-v[i].speedVec[1]),v[i].y>e.canvasHeight-g&&(v[i].y=e.canvasHeight-g,v[i].speedVec[1]=-v[i].speedVec[1]);for(var r=0;r<v.length;r++){var l=v[r];if(i!==r){var o=s(v[i],v[r],e.dotSize);if(null!==o){c.state===n.infected&&l.state===n.healthy&&(l.state=n.infected),l.state===n.infected&&c.state===n.healthy&&(c.state=n.infected),c.stationary||(c.x=c.x-c.speedVec[0]*e.dotVelocity,c.y=c.y-c.speedVec[1]*e.dotVelocity);var d=c.speedVec,h=l.speedVec,u=[d[0]-h[0],d[1]-h[1]],f=(b=u)[0]*(x=o)[0]+b[1]*x[1],m=[o[0]*f,o[1]*f],p=[u[0]-m[0],u[1]-m[1]];if(!c.stationary){c.speedVec[0]=c.speedVec[0]-(l.stationary?2:1)*p[0],c.speedVec[1]=c.speedVec[1]-(l.stationary?2:1)*p[1];var y=Math.sqrt(Math.pow(c.speedVec[0],2)+Math.pow(c.speedVec[1],2));c.speedVec[0]/=y,c.speedVec[1]/=y}if(!l.stationary){l.speedVec[0]=l.speedVec[0]+(c.stationary?2:1)*p[0],l.speedVec[1]=l.speedVec[1]+(c.stationary?2:1)*p[1];var E=Math.sqrt(Math.pow(l.speedVec[0],2)+Math.pow(l.speedVec[1],2));l.speedVec[0]/=E,l.speedVec[1]/=E}}}}}}var b,x}(u),r=v.filter((function(e){return e.state===n.healthy})).length,l=v.filter((function(e){return e.state===n.infected})).length,o=v.filter((function(e){return e.state===n.cured})).length,u-m>50&&(m=u,f.unshift([l,o])),l>i&&(i=l),c=100*i/v.length,a&&a(),window.requestAnimationFrame(d)}};return{start:function(){u||(u=!0,window.requestAnimationFrame(E))},stop:function(){h=!0},onUpdate:function(e){a=e},getState:function(){return{numHealthy:r,numInfected:l,numCured:o,peakInfected:i,peakInfectedPercent:c}}}},u=a(82),f=a(211),m=a(216),g=a(217),p=a(212),y=a(214),v=a(50),E=a(210),b=a(215),x=a(213),H=f.a.Title,S=f.a.Paragraph,V=function(e){var t=e.simulationConfig,a=e.setSimulationConfig,n=e.field,i=e.max,r=e.min,l=e.suffix;return c.a.createElement(m.a,{gutter:16},c.a.createElement(g.a,{span:16},c.a.createElement(p.a,{value:t[n],min:r,max:i,tipFormatter:function(e){return"".concat(e).concat(l||"")},style:{width:"100%"},onChange:function(e){a(Object(u.a)(t,(function(t){t[n]=e||1})))}})),c.a.createElement(g.a,{span:8},c.a.createElement(y.a,{value:t[n],min:r,max:i,style:{width:"100%"},formatter:function(e){return"".concat(e).concat(l||"")},onChange:function(e){a(Object(u.a)(t,(function(t){t[n]=e||1})))}})))};var w=function(){var e=Object(i.useState)(),t=Object(o.a)(e,2),a=t[0],n=t[1],r=Object(i.useState)(),s=Object(o.a)(r,2),d=s[0],u=s[1],f=Object(i.useState)({dotSize:8,dotVelocity:1.4,canvasWidth:1200,canvasHeight:800,chartHeight:300,chartBarWidth:.5}),p=Object(o.a)(f,1)[0],y=Object(i.useState)(),w=Object(o.a)(y,2),C=w[0],M=w[1],j=Object(i.useState)({stationaryPercentAtStart:60,infectedDotsAtStart:10,timeToCure:14,numberOfDots:100,medicalCapacityPercent:25}),W=Object(o.a)(j,2),O=W[0],T=W[1],A=c.a.useCallback((function(){a&&a.stop();var e=h(Object(l.a)({},p),Object(l.a)({},O));M(O),n(e),e.start()}),[a,O,p]),D=c.a.useCallback((function(){if(a){var e=a.getState();u(e)}}),[a]);Object(i.useEffect)((function(){var e=setInterval((function(){D()}),1e3);return function(){return clearInterval(e)}}),[D]),Object(i.useEffect)((function(){}),[a]);var P=c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("div",null,"Population count"," ",c.a.createElement(v.a,{overlay:"Set how many people will live in your population."},c.a.createElement(x.a,null))),c.a.createElement(V,{min:10,max:500,field:"numberOfDots",simulationConfig:O,setSimulationConfig:T})),c.a.createElement(E.a,null),c.a.createElement("div",null,c.a.createElement("div",null,"Percent of stationary (isolating) people"," ",c.a.createElement(v.a,{overlay:'This percentage of people will not move in your population. They can be "visited" by other persons, but will remain stationary.'},c.a.createElement(x.a,null))),c.a.createElement(V,{min:0,max:100,field:"stationaryPercentAtStart",simulationConfig:O,setSimulationConfig:T,suffix:"%"})),c.a.createElement(E.a,null),c.a.createElement("div",null,c.a.createElement("div",null,"Time to cure in seconds"," ",c.a.createElement(v.a,{overlay:'After set amount of time, every infected person will become "cured" - this means that it will not transmit the infection and cannot be infected anymore.'},c.a.createElement(x.a,null))),c.a.createElement(V,{min:1,max:30,field:"timeToCure",simulationConfig:O,setSimulationConfig:T,suffix:" s"})),c.a.createElement(E.a,null),c.a.createElement("div",null,c.a.createElement("div",null,"Initially infected population"," ",c.a.createElement(v.a,{overlay:"This number of people will have be infected from the beginning."},c.a.createElement(x.a,null))),c.a.createElement(V,{min:1,max:O.numberOfDots,field:"infectedDotsAtStart",simulationConfig:O,setSimulationConfig:T,suffix:" / ".concat(O.numberOfDots)})));return c.a.createElement("div",null,c.a.createElement(m.a,{justify:"center",align:"middle"},c.a.createElement(g.a,{span:20},c.a.createElement(m.a,{justify:"center"},c.a.createElement(g.a,{span:16},c.a.createElement(m.a,{justify:"center"},c.a.createElement(H,null,"Social Distancing Simulator"),c.a.createElement(S,{type:"secondary"},"Ant Design, a design language for background applications, is refined by Ant UED Team. Ant Design, a design language for background applications, is refined by Ant UED Team. Ant Design, a design language for background applications, is refined by Ant UED Team. Ant Design, a design language for background applications, is refined by Ant UED Team.")))),c.a.createElement(m.a,{justify:"center",gutter:24,align:"middle",style:{height:60}},d&&c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{className:"indicator i-healthy"},"Healthy: ",d.numHealthy),c.a.createElement(g.a,{className:"indicator i-infected"},"Infected: ",d.numInfected),c.a.createElement(g.a,{className:"indicator i-cured"},"Cured: ",null===d||void 0===d?void 0:d.numCured))),c.a.createElement(m.a,{justify:"center",gutter:16,align:"middle",style:{height:60}},d&&c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{className:"small-indicator i-peak-infected"},"Peak infected: ",d.peakInfected," (",null===d||void 0===d?void 0:d.peakInfectedPercent.toFixed(2)," %)"))))),c.a.createElement(m.a,{justify:"center"},c.a.createElement(g.a,{span:20},c.a.createElement(m.a,{gutter:16},c.a.createElement(g.a,{className:"wrap-controls"},P),c.a.createElement(g.a,{className:"wrap-canvas",style:{minWidth:600}},c.a.createElement(m.a,{justify:"center"},c.a.createElement(b.a,{type:"primary",danger:C!==O,style:{width:p.canvasWidth/2},onClick:A},a?C===O?"Restart simulation":"Apply new settings and restart simulation":"Start simulation")),c.a.createElement(m.a,{justify:"center"},c.a.createElement("canvas",{id:"canvas",style:{width:p.canvasWidth/2,height:(p.canvasHeight+p.chartHeight)/2}})))))))};a(205),a(206);r.render(i.createElement(w,null),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.0a01d3c7.chunk.js.map